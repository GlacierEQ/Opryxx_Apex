apiVersion: v1
kind: ConfigMap
metadata:
  name: opryxx-config
data:
  # Override base configuration for staging
  ENVIRONMENT: "staging"
  LOG_LEVEL: "DEBUG"
  
  # Staging-specific API settings
  API_HOST: "0.0.0.0"
  API_PORT: "8000"
  
  # Feature flags for staging
  FEATURE_AI_ANALYTICS: "true"
  FEATURE_ADVANCED_LOGGING: "true"
  
  # Resource limits (in-memory cache, etc.)
  MAX_CACHE_SIZE: "256MB"
  QUERY_TIMEOUT: "60s"
  
  # External service endpoints
  DATABASE_URL: "postgresql://staging-user:${DB_PASSWORD}@staging-db:5432/opryxx_staging"
  CACHE_URL: "redis://staging-cache:6379/1"
  
  # Security settings
  CORS_ALLOWED_ORIGINS: "https://staging.opryxx.com,http://localhost:3000"
  RATE_LIMIT: "500"
  
  # Monitoring and observability
  METRICS_ENABLED: "true"
  TRACING_ENABLED: "true"
  
  # Performance tuning
  WORKER_COUNT: "2"
  THREADS_PER_WORKER: "1"
  
  # Application-specific settings
  LOG_RETENTION_DAYS: "14"
  MAX_LOG_SIZE_MB: "5"
  
  # External integrations (API keys injected via secrets)
  SENTRY_DSN: "${SENTRY_DSN}"
  NEW_RELIC_LICENSE_KEY: "${NEW_RELIC_LICENSE_KEY}"
